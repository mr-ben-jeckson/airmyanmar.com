!function(t,n){function e(t){return"object"==typeof t}function o(t){return"string"==typeof t}function i(t){return"number"==typeof t}function a(t){return t===n}function s(t,n){return a(t)?"gmap4_"+(n?j+1:++j):t}function r(n,e,o,i,a){function s(e,i){e&&t.each(e,function(t,e){var s=n,r=e;C(e)&&(s=e[0],r=e[1]),i(o,t,function(t){r.apply(s,[a||o,t,u])})})}var r=e.td||{},u={id:i,data:r.data,tag:r.tag};s(r.events,B.event.addListener),s(r.onces,B.event.addListenerOnce)}function u(t){var n,e=[];for(n in t)t.hasOwnProperty(n)&&e.push(n);return e}function l(t,n){var e,o=arguments;for(e=2;e<o.length;e++)if(n in o[e]&&o[e].hasOwnProperty(n))return void(t[n]=o[e][n])}function d(n,e){var o,i,a=["data","tag","id","events","onces"],s={};if(n.td)for(o in n.td)n.td.hasOwnProperty(o)&&"options"!==o&&"values"!==o&&(s[o]=n.td[o]);for(i=0;i<a.length;i++)l(s,a[i],e,n.td);return s.options=t.extend({},n.opts||{},e.options||{}),s}function c(){if(k.verbose){var t,n=[];if(window.console&&O(console.error)){for(t=0;t<arguments.length;t++)n.push(arguments[t]);console.error.apply(console,n)}else{for(n="",t=0;t<arguments.length;t++)n+=arguments[t].toString()+" ";alert(n)}}}function p(t){return(i(t)||o(t))&&""!==t&&!isNaN(t)}function f(t){var n,o=[];if(!a(t))if(e(t))if(i(t.length))o=t;else for(n in t)o.push(t[n]);else o.push(t);return o}function g(n){return n?O(n)?n:(n=f(n),function(o){var i;if(a(o))return!1;if(e(o)){for(i=0;i<o.length;i++)if(t.inArray(o[i],n)>=0)return!0;return!1}return t.inArray(o,n)>=0}):void 0}function h(t,n,e){var i=n?t:null;return!t||o(t)?i:t.latLng?h(t.latLng):t instanceof B.LatLng?t:p(t.lat)?new B.LatLng(t.lat,t.lng):!e&&C(t)&&p(t[0])&&p(t[1])?new B.LatLng(t[0],t[1]):i}function v(t){var n,e;return!t||t instanceof B.LatLngBounds?t||null:(C(t)?2===t.length?(n=h(t[0]),e=h(t[1])):4===t.length&&(n=h([t[0],t[1]]),e=h([t[2],t[3]])):"ne"in t&&"sw"in t?(n=h(t.ne),e=h(t.sw)):"n"in t&&"e"in t&&"s"in t&&"w"in t&&(n=h([t.n,t.e]),e=h([t.s,t.w])),n&&e?new B.LatLngBounds(e,n):null)}function m(t,n,e,i,a){var s=!!e&&h(i.td,!1,!0),r=s?{latLng:s}:!!i.td.address&&(o(i.td.address)?{address:i.td.address}:i.td.address),u=!!r&&S.get(r),l=this;r?(a=a||0,u?(i.latLng=u.results[0].geometry.location,i.results=u.results,i.status=u.status,n.apply(t,[i])):(r.location&&(r.location=h(r.location)),r.bounds&&(r.bounds=v(r.bounds)),(E.geocoder||(E.geocoder=new B.Geocoder),E.geocoder).geocode(r,function(o,s){s===B.GeocoderStatus.OK?(S.store(r,{results:o,status:s}),i.latLng=o[0].geometry.location,i.results=o,i.status=s,n.apply(t,[i])):s===B.GeocoderStatus.OVER_QUERY_LIMIT&&a<k.queryLimit.attempt?setTimeout(function(){m.apply(l,[t,n,e,i,a+1])},k.queryLimit.delay+Math.floor(Math.random()*k.queryLimit.random)):(c("geocode failed",s,r),i.latLng=i.results=!1,i.status=s,n.apply(t,[i]))}))):(i.latLng=h(i.td,!1,!0),n.apply(t,[i]))}function y(n,e,o,i){var a=this,s=-1;!function r(){do{s++}while(s<n.length&&!("address"in n[s]));return s>=n.length?void o.apply(e,[i]):void m(a,function(e){delete e.td,t.extend(n[s],e),r.apply(a,[])},!0,{td:n[s]})}()}function w(t,n,e){var o=!1;navigator&&navigator.geolocation?navigator.geolocation.getCurrentPosition(function(i){o||(o=!0,e.latLng=new B.LatLng(i.coords.latitude,i.coords.longitude),n.apply(t,[e]))},function(){o||(o=!0,e.latLng=!1,n.apply(t,[e]))},e.opts.getCurrentPosition):(e.latLng=!1,n.apply(t,[e]))}function L(n,e,i){function a(){var t;for(t in i)if(i.hasOwnProperty(t)&&!u.hasOwnProperty(t))return t}var s,r,u={},l=this,d={latLng:{map:!1,marker:!1,infowindow:!1,circle:!1,overlay:!1,getlatlng:!1,getmaxzoom:!1,getelevation:!1,streetviewpanorama:!1,getaddress:!0},geoloc:{getgeoloc:!0}};o(i)&&((r={})[i]={},i=r),l.run=function(){for(var o,r;o=a();){if(O(n[o]))return s=o,r=t.extend(!0,{},k[o]||{},i[o].options||{}),void(o in d.latLng?i[o].values?y(i[o].values,n,n[o],{td:i[o],opts:r,session:u}):m(n,n[o],d.latLng[o],{td:i[o],opts:r,session:u}):o in d.geoloc?w(n,n[o],{td:i[o],opts:r,session:u}):n[o].apply(n,[{td:i[o],opts:r,session:u}]));u[o]=null}e.apply(n,[i,u])},l.ack=function(t){u[s]=t,l.run.apply(l,[])}}function b(){return E.es||(E.es=new B.ElevationService),E.es}function x(n,o,i){function a(t){C[t]||(delete E[t].options.map,C[t]=new k.classes.Marker(E[t].options),r(n,{td:E[t]},C[t],E[t].id))}function u(t){e(I[t])?(O(I[t].obj.setMap)&&I[t].obj.setMap(null),O(I[t].obj.remove)&&I[t].obj.remove(),O(I[t].shadow.remove)&&I[t].obj.remove(),O(I[t].shadow.setMap)&&I[t].shadow.setMap(null),delete I[t].obj,delete I[t].shadow):C[t]&&C[t].setMap(null),delete I[t]}function l(){var t=function(){var t,n,e,o,i,a,s,r,u=Math.cos,l=Math.sin,d=arguments;return d[0]instanceof B.LatLng?(t=d[0].lat(),e=d[0].lng(),d[1]instanceof B.LatLng?(n=d[1].lat(),o=d[1].lng()):(n=d[1],o=d[2])):(t=d[0],e=d[1],d[2]instanceof B.LatLng?(n=d[2].lat(),o=d[2].lng()):(n=d[2],o=d[3])),i=Math.PI*t/180,a=Math.PI*e/180,s=Math.PI*n/180,r=Math.PI*o/180,6371e3*Math.acos(Math.min(u(i)*u(s)*u(a)*u(r)+u(i)*l(a)*u(s)*l(r)+l(i)*l(s),1))}(o.getCenter(),o.getBounds().getNorthEast());return new B.Circle({center:o.getCenter(),radius:1.25*t}).getBounds()}function d(){clearTimeout(p),p=setTimeout(c,25)}function c(){if(!m&&!w&&L){var n,e,a,s,r,d,c,p,g,x,M,P=!1,k=[],j={},O=o.getZoom(),C="maxZoom"in i&&O>i.maxZoom,T=function(){var t,n={};for(t in I)n[t]=!0;return n}();for(y=!1,O>3&&(P=(r=l()).getSouthWest().lng()<r.getNorthEast().lng()),n=0;n<E.length;n++)!E[n]||P&&!r.contains(E[n].options.position)||h&&!h(S[n])||k.push(n);for(;;){for(n=0;j[n]&&n<k.length;)n++;if(n===k.length)break;if(s=[],b&&!C){M=10;do{for(p=s,s=[],M--,c=p.length?r.getCenter():E[k[n]].options.position,_=c,void 0,void 0,void 0,D=f.fromLatLngToDivPixel(_),U=f.fromDivPixelToLatLng(new B.Point(D.x+i.radius,D.y-i.radius)),A=f.fromDivPixelToLatLng(new B.Point(D.x-i.radius,D.y+i.radius)),r=new B.LatLngBounds(A,U),e=n;e<k.length;e++)j[e]||r.contains(E[k[e]].options.position)&&s.push(e)}while(p.length<s.length&&s.length>1&&M)}else for(e=n;e<k.length;e++)if(!j[e]){s.push(e);break}for(d={indexes:[],ref:[]},g=x=0,a=0;a<s.length;a++)j[s[a]]=!0,d.indexes.push(k[s[a]]),d.ref.push(k[s[a]]),g+=E[k[s[a]]].options.position.lat(),x+=E[k[s[a]]].options.position.lng();g/=s.length,x/=s.length,d.latLng=new B.LatLng(g,x),d.ref=d.ref.join("-"),d.ref in T?delete T[d.ref]:(1===s.length&&(I[d.ref]=!0),v(d))}t.each(T,function(t){u(t)}),w=!1}var _,D,U,A}var p,f,h,v,m=!1,y=!1,w=!1,L=!1,b=!0,x=this,M=[],I={},P={},j={},C=[],E=[],S=[],T=function(t){function n(){return this.onAdd=function(){},this.onRemove=function(){},this.draw=function(){},k.classes.OverlayView.apply(this,[])}n.prototype=k.classes.OverlayView.prototype;var e=new n;return e.setMap(t),e}(o,i.radius);(function t(){return(f=T.getProjection())?(L=!0,M.push(B.event.addListener(o,"zoom_changed",d)),M.push(B.event.addListener(o,"bounds_changed",d)),void c()):void setTimeout(function(){t.apply(x,[])},25)})(),x.getById=function(t){return t in P&&(a(P[t]),C[P[t]])},x.rm=function(t){var n=P[t];C[n]&&C[n].setMap(null),delete C[n],C[n]=!1,delete E[n],E[n]=!1,delete S[n],S[n]=!1,delete P[t],delete j[n],y=!0},x.clearById=function(t){return t in P?(x.rm(t),!0):void 0},x.clear=function(t,n,e){var o,i,a,s,r,u=[],l=g(e);for(t?(o=E.length-1,i=-1,a=-1):(o=0,i=E.length,a=1),s=o;s!==i&&(!E[s]||l&&!l(E[s].tag)||(u.push(j[s]),!n&&!t));s+=a);for(r=0;r<u.length;r++)x.rm(u[r])},x.add=function(t,n){t.id=s(t.id),x.clearById(t.id),P[t.id]=C.length,j[C.length]=t.id,C.push(null),E.push(t),S.push(n),y=!0},x.addMarker=function(t,e){(e=e||{}).id=s(e.id),x.clearById(e.id),e.options||(e.options={}),e.options.position=t.getPosition(),r(n,{td:e},t,e.id),P[e.id]=C.length,j[C.length]=e.id,C.push(t),E.push(e),S.push(e.data||{}),y=!0},x.td=function(t){return E[t]},x.value=function(t){return S[t]},x.marker=function(t){return t in C&&(a(t),C[t])},x.markerIsSet=function(t){return Boolean(C[t])},x.setMarker=function(t,n){C[t]=n},x.store=function(t,n,e){I[t.ref]={obj:n,shadow:e}},x.free=function(){var n;for(n=0;n<M.length;n++)B.event.removeListener(M[n]);M=[],t.each(I,function(t){u(t)}),I={},t.each(E,function(t){E[t]=null}),E=[],t.each(C,function(t){C[t]&&(C[t].setMap(null),delete C[t])}),C=[],t.each(S,function(t){delete S[t]}),S=[],P={},j={}},x.filter=function(t){h=t,c()},x.enable=function(t){b!==t&&(b=t,c())},x.display=function(t){v=t},x.error=function(t){t},x.beginUpdate=function(){m=!0},x.endUpdate=function(){m=!1,y&&c()},x.autofit=function(t){var n;for(n=0;n<E.length;n++)E[n]&&t.extend(E[n].options.position)}}function M(t,n){var e=this;e.id=function(){return t},e.filter=function(t){n.filter(t)},e.enable=function(){n.enable(!0)},e.disable=function(){n.enable(!1)},e.add=function(t,e,o){o||n.beginUpdate(),n.addMarker(t,e),o||n.endUpdate()},e.getById=function(t){return n.getById(t)},e.clearById=function(t,e){var o;return e||n.beginUpdate(),o=n.clearById(t),e||n.endUpdate(),o},e.clear=function(t,e,o,i){i||n.beginUpdate(),n.clear(t,e,o),i||n.endUpdate()}}function I(n,e,o,i){var a=this,s=[];k.classes.OverlayView.call(a),a.setMap(n),a.onAdd=function(){var n=a.getPanes();e.pane in n&&t(n[e.pane]).append(i),t.each("dblclick click mouseover mousemove mouseout mouseup mousedown".split(" "),function(n,e){s.push(B.event.addDomListener(i[0],e,function(n){t.Event(n).stopPropagation(),B.event.trigger(a,e,[n]),a.draw()}))}),s.push(B.event.addDomListener(i[0],"contextmenu",function(n){t.Event(n).stopPropagation(),B.event.trigger(a,"rightclick",[n]),a.draw()}))},a.getPosition=function(){return o},a.setPosition=function(t){o=t,a.draw()},a.draw=function(){var t=a.getProjection().fromLatLngToDivPixel(o);i.css("left",t.x+e.offset.x+"px").css("top",t.y+e.offset.y+"px")},a.onRemove=function(){var t;for(t=0;t<s.length;t++)B.event.removeListener(s[t]);i.remove()},a.hide=function(){i.hide()},a.show=function(){i.show()},a.toggle=function(){i&&(i.is(":visible")?a.show():a.hide())},a.toggleDOM=function(){a.setMap(a.getMap()?null:n)},a.getDOMElement=function(){return i[0]}}function P(i){function u(){!P&&(P=S.get())&&P.run()}function l(){P=null,S.ack(),u.call(j)}function p(t){var n,e=t.td.callback;e&&(n=Array.prototype.slice.call(arguments,1),O(e)?e.apply(i,n):C(e)&&O(e[1])&&e[1].apply(e[0],n))}function m(t,n,e){e&&r(i,t,n,e),p(t,n),P.ack(n)}function y(n,e){var o=(e=e||{}).td&&e.td.options?e.td.options:0;_?o&&(o.center&&(o.center=h(o.center)),_.setOptions(o)):((o=e.opts||t.extend(!0,{},k.map,o||{})).center=n||h(o.center),_=new k.classes.Map(i.get(0),o))}function w(n,e,o){var a=[],s="values"in n.td;return s||(n.td.values=[{options:n.opts}]),n.td.values.length?(y(),t.each(n.td.values,function(t,s){var u,l,c,p,f=d(n,s);if(f.options[o])if(f.options[o][0][0]&&C(f.options[o][0][0]))for(l=0;l<f.options[o].length;l++)for(c=0;c<f.options[o][l].length;c++)f.options[o][l][c]=h(f.options[o][l][c]);else for(l=0;l<f.options[o].length;l++)f.options[o][l]=h(f.options[o][l]);f.options.map=_,p=new B[e](f.options),a.push(p),u=T.add({td:f},e.toLowerCase(),p),r(i,{td:f},p,u)}),void m(n,s?a:a[0])):void m(n,!1)}var P,j=this,S=new function(){var t=[];this.empty=function(){return!t.length},this.add=function(n){t.push(n)},this.get=function(){return!!t.length&&t[0]},this.ack=function(){t.shift()}},T=new function(){function n(t){return{id:t.id,name:t.name,object:t.obj,tag:t.tag,data:t.data}}function e(t){O(t.setMap)&&t.setMap(null),O(t.remove)&&t.remove(),O(t.free)&&t.free(),t=null}var o={},i={},r=this;r.add=function(t,n,e,a){var u=t.td||{},l=s(u.id);return o[n]||(o[n]=[]),l in i&&r.clearById(l),i[l]={obj:e,sub:a,name:n,id:l,tag:u.tag,data:u.data},o[n].push(l),l},r.getById=function(t,e,o){var a=!1;return t in i&&(a=e?i[t].sub:o?n(i[t]):i[t].obj),a},r.get=function(t,e,a,s){var r,u,l=g(a);if(!o[t]||!o[t].length)return null;for(r=o[t].length;r;)if(r--,u=o[t][e?r:o[t].length-r-1],u&&i[u]){if(l&&!l(i[u].tag))continue;return s?n(i[u]):i[u].obj}return null},r.all=function(t,e,s){var r=[],u=g(e),l=function(t){var e,a;for(e=0;e<o[t].length;e++)if(a=o[t][e],a&&i[a]){if(u&&!u(i[a].tag))continue;r.push(s?n(i[a]):i[a].obj)}};if(t in o)l(t);else if(a(t))for(t in o)l(t);return r},r.rm=function(t,n,e){var a,s;if(!o[t])return!1;if(n)if(e)for(a=o[t].length-1;a>=0&&(s=o[t][a],!n(i[s].tag));a--);else for(a=0;a<o[t].length&&(s=o[t][a],!n(i[s].tag));a++);else a=e?o[t].length-1:0;return a in o[t]&&r.clearById(o[t][a],a)},r.clearById=function(t,n){if(t in i){var s,r=i[t].name;for(s=0;a(n)&&s<o[r].length;s++)t===o[r][s]&&(n=s);return e(i[t].obj),i[t].sub&&e(i[t].sub),delete i[t],o[r].splice(n,1),!0}return!1},r.objGetById=function(t){var n,e;if(o.clusterer)for(e in o.clusterer)if(!1!==(n=i[o.clusterer[e]].obj.getById(t)))return n;return!1},r.objClearById=function(t){var n;if(o.clusterer)for(n in o.clusterer)if(i[o.clusterer[n]].obj.clearById(t))return!0;return null},r.clear=function(t,n,e,i){var a,s,u,l=g(i);if(t&&t.length)t=f(t);else{t=[];for(a in o)t.push(a)}for(s=0;s<t.length;s++)if(u=t[s],n)r.rm(u,l,!0);else if(e)r.rm(u,l,!1);else for(;r.rm(u,l,!1););},r.objClear=function(n,e,a,s){var r;if(o.clusterer&&(t.inArray("marker",n)>=0||!n.length))for(r in o.clusterer)i[o.clusterer[r]].obj.clear(e,a,s)}},_=null;j._plan=function(t){var n;for(n=0;n<t.length;n++)S.add(new L(j,l,t[n]));u()},j.map=function(t){y(t.latLng,t),r(i,t,_),m(t,_)},j.destroy=function(t){T.clear(),i.empty(),_&&(_=null),m(t,!0)},j.overlay=function(n,e){var o=[],a="values"in n.td;return a||(n.td.values=[{latLng:n.latLng,options:n.opts}]),n.td.values.length?(I.__initialised||(I.prototype=new k.classes.OverlayView,I.__initialised=!0),t.each(n.td.values,function(a,s){var u,l,c=d(n,s),p=t(document.createElement("div")).css({border:"none",borderWidth:0,position:"absolute"});p.append(c.options.content),l=new I(_,c.options,h(c)||h(s),p),o.push(l),p=null,e||(u=T.add(n,"overlay",l),r(i,{td:c},l,u))}),e?o[0]:void m(n,a?o:o[0])):void m(n,!1)},j.marker=function(e){var o,a,u,l="values"in e.td,p=!_;return l||(e.opts.position=e.latLng||h(e.opts.position),e.td.values=[{options:e.opts}]),e.td.values.length?(p&&y(),e.td.cluster&&!_.getBounds()?void B.event.addListenerOnce(_,"bounds_changed",function(){j.marker.apply(j,[e])}):void(e.td.cluster?(e.td.cluster instanceof M?(a=e.td.cluster,u=T.getById(a.id(),!0)):(u=function(e){var o,a,s=new x(i,_,e),u={},l={},d=[],p=/^[0-9]+$/;for(a in e)p.test(a)?(d.push(1*a),l[a]=e[a],l[a].width=l[a].width||0,l[a].height=l[a].height||0):u[a]=e[a];return d.sort(function(t,n){return t>n}),o=u.calculator?function(n){var e=[];return t.each(n,function(t,n){e.push(s.value(n))}),u.calculator.apply(i,[e])}:function(t){return t.length},s.error(function(){c.apply(j,arguments)}),s.display(function(a){var c,p,f,g,v,m,y=o(a.indexes);if(e.force||y>1)for(c=0;c<d.length;c++)d[c]<=y&&(p=l[d[c]]);p?(v=p.offset||[-p.width/2,-p.height/2],(f=t.extend({},u)).options=t.extend({pane:"overlayLayer",content:p.content?p.content.replace("CLUSTER_COUNT",y):"",offset:{x:("x"in v?v.x:v[0])||0,y:("y"in v?v.y:v[1])||0}},u.options||{}),g=j.overlay({td:f,opts:f.options,latLng:h(a)},!0),f.options.pane="floatShadow",f.options.content=t(document.createElement("div")).width(p.width+"px").height(p.height+"px").css({cursor:"pointer"}),m=j.overlay({td:f,opts:f.options,latLng:h(a)},!0),u.data={latLng:h(a),markers:[]},t.each(a.indexes,function(t,n){u.data.markers.push(s.value(n)),s.markerIsSet(n)&&s.marker(n).setMap(null)}),r(i,{td:u},m,n,{main:g,shadow:m}),s.store(a,g,m)):t.each(a.indexes,function(t,n){s.marker(n).setMap(_)})}),s}(e.td.cluster),a=new M(s(e.td.id,!0),u),T.add(e,"clusterer",a,u)),u.beginUpdate(),t.each(e.td.values,function(t,n){var o=d(e,n);o.options.position=h(o.options.position?o.options.position:n),o.options.position&&(o.options.map=_,p&&(_.setCenter(o.options.position),p=!1),u.add(o,n))}),u.endUpdate(),m(e,a)):(o=[],t.each(e.td.values,function(t,n){var a,s,u=d(e,n);u.options.position=h(u.options.position?u.options.position:n),u.options.position&&(u.options.map=_,p&&(_.setCenter(u.options.position),p=!1),s=new k.classes.Marker(u.options),o.push(s),a=T.add({td:u},"marker",s),r(i,{td:u},s,a))}),m(e,l?o:o[0])))):void m(e,!1)},j.getroute=function(t){t.opts.origin=h(t.opts.origin,!0),t.opts.destination=h(t.opts.destination,!0),(E.ds||(E.ds=new B.DirectionsService),E.ds).route(t.opts,function(n,e){p(t,e===B.DirectionsStatus.OK&&n,e),P.ack()})},j.getdistance=function(t){var n;for(t.opts.origins=f(t.opts.origins),n=0;n<t.opts.origins.length;n++)t.opts.origins[n]=h(t.opts.origins[n],!0);for(t.opts.destinations=f(t.opts.destinations),n=0;n<t.opts.destinations.length;n++)t.opts.destinations[n]=h(t.opts.destinations[n],!0);(E.dms||(E.dms=new B.DistanceMatrixService),E.dms).getDistanceMatrix(t.opts,function(n,e){p(t,e===B.DistanceMatrixStatus.OK&&n,e),P.ack()})},j.infowindow=function(e){var o=[],s="values"in e.td;s||(e.latLng&&(e.opts.position=e.latLng),e.td.values=[{options:e.opts}]),t.each(e.td.values,function(t,u){var l,c,p=d(e,u);p.options.position=h(p.options.position?p.options.position:u.latLng),_||y(p.options.position),(c=new k.classes.InfoWindow(p.options))&&(a(p.open)||p.open)&&(s?c.open(_,p.anchor||n):c.open(_,p.anchor||(e.latLng?n:e.session.marker?e.session.marker:n))),o.push(c),l=T.add({td:p},"infowindow",c),r(i,{td:p},c,l)}),m(e,s?o:o[0])},j.circle=function(n){var e=[],o="values"in n.td;return o||(n.opts.center=n.latLng||h(n.opts.center),n.td.values=[{options:n.opts}]),n.td.values.length?(t.each(n.td.values,function(t,o){var a,s,u=d(n,o);u.options.center=h(u.options.center?u.options.center:o),_||y(u.options.center),u.options.map=_,s=new k.classes.Circle(u.options),e.push(s),a=T.add({td:u},"circle",s),r(i,{td:u},s,a)}),void m(n,o?e:e[0])):void m(n,!1)},j.getaddress=function(t){p(t,t.results,t.status),P.ack()},j.getlatlng=function(t){p(t,t.results,t.status),P.ack()},j.getmaxzoom=function(t){(E.mzs||(E.mzs=new B.MaxZoomService),E.mzs).getMaxZoomAtLatLng(t.latLng,function(n){p(t,n.status===B.MaxZoomStatus.OK&&n.zoom,status),P.ack()})},j.getelevation=function(t){var n,e=[],o=function(n,e){p(t,e===B.ElevationStatus.OK&&n,e),P.ack()};if(t.latLng)e.push(t.latLng);else for(e=f(t.td.locations||[]),n=0;n<e.length;n++)e[n]=h(e[n]);if(e.length)b().getElevationForLocations({locations:e},o);else{if(t.td.path&&t.td.path.length)for(n=0;n<t.td.path.length;n++)e.push(h(t.td.path[n]));e.length?b().getElevationAlongPath({path:e,samples:t.td.samples},o):P.ack()}},j.defaults=function(n){t.each(n.td,function(n,o){k[n]=e(k[n])?t.extend({},k[n],o):o}),P.ack(!0)},j.rectangle=function(n){var e=[],o="values"in n.td;return o||(n.td.values=[{options:n.opts}]),n.td.values.length?(t.each(n.td.values,function(t,o){var a,s,u=d(n,o);u.options.bounds=v(u.options.bounds?u.options.bounds:o),_||y(u.options.bounds.getCenter()),u.options.map=_,s=new k.classes.Rectangle(u.options),e.push(s),a=T.add({td:u},"rectangle",s),r(i,{td:u},s,a)}),void m(n,o?e:e[0])):void m(n,!1)},j.polyline=function(t){w(t,"Polyline","path")},j.polygon=function(t){w(t,"Polygon","paths")},j.trafficlayer=function(t){y();var n=T.get("trafficlayer");n||((n=new k.classes.TrafficLayer).setMap(_),T.add(t,"trafficlayer",n)),m(t,n)},j.bicyclinglayer=function(t){y();var n=T.get("bicyclinglayer");n||((n=new k.classes.BicyclingLayer).setMap(_),T.add(t,"bicyclinglayer",n)),m(t,n)},j.groundoverlay=function(t){t.opts.bounds=v(t.opts.bounds),t.opts.bounds&&y(t.opts.bounds.getCenter());var n=new k.classes.GroundOverlay(t.opts.url,t.opts.bounds,t.opts.opts);n.setMap(_),m(t,n,T.add(t,"groundoverlay",n))},j.streetviewpanorama=function(n){n.opts.opts||(n.opts.opts={}),n.latLng?n.opts.opts.position=n.latLng:n.opts.opts.position&&(n.opts.opts.position=h(n.opts.opts.position)),n.td.divId?n.opts.container=document.getElementById(n.td.divId):n.opts.container&&(n.opts.container=t(n.opts.container).get(0));var e=new k.classes.StreetViewPanorama(n.opts.container,n.opts.opts);e&&_.setStreetView(e),m(n,e,T.add(n,"streetviewpanorama",e))},j.kmllayer=function(n){var e=[],o="values"in n.td;return o||(n.td.values=[{options:n.opts}]),n.td.values.length?(t.each(n.td.values,function(t,o){var a,s,u,l=d(n,o);_||y(),u=l.options,l.options.opts&&(u=l.options.opts,l.options.url&&(u.url=l.options.url)),u.map=_,s=function(t){var n,e=B.version.split(".");for(t=t.split("."),n=0;n<e.length;n++)e[n]=parseInt(e[n],10);for(n=0;n<t.length;n++){if(t[n]=parseInt(t[n],10),!e.hasOwnProperty(n))return!1;if(e[n]<t[n])return!1}return!0}("3.10")?new k.classes.KmlLayer(u):new k.classes.KmlLayer(u.url,u),e.push(s),a=T.add({td:l},"kmllayer",s),r(i,{td:l},s,a)}),void m(n,o?e:e[0])):void m(n,!1)},j.panel=function(n){y();var e,o=0,s=0,r=t(document.createElement("div"));r.css({position:"absolute",zIndex:1e3,visibility:"hidden"}),n.opts.content&&(e=t(n.opts.content),r.append(e),i.first().prepend(r),a(n.opts.left)?a(n.opts.right)?n.opts.center&&(o=(i.width()-e.width())/2):o=i.width()-e.width()-n.opts.right:o=n.opts.left,a(n.opts.top)?a(n.opts.bottom)?n.opts.middle&&(s=(i.height()-e.height())/2):s=i.height()-e.height()-n.opts.bottom:s=n.opts.top,r.css({top:s,left:o,visibility:"visible"})),m(n,r,T.add(n,"panel",r)),r=null},j.directionsrenderer=function(n){n.opts.map=_;var e=new B.DirectionsRenderer(n.opts);n.td.divId?e.setPanel(document.getElementById(n.td.divId)):n.td.container&&e.setPanel(t(n.td.container).get(0)),m(n,e,T.add(n,"directionsrenderer",e))},j.getgeoloc=function(t){m(t,t.latLng)},j.styledmaptype=function(t){y();var n=new k.classes.StyledMapType(t.td.styles,t.opts);_.mapTypes.set(t.td.id,n),m(t,n)},j.imagemaptype=function(t){y();var n=new k.classes.ImageMapType(t.opts);_.mapTypes.set(t.td.id,n),m(t,n)},j.autofit=function(n){var e=new B.LatLngBounds;t.each(T.all(),function(t,n){n.getPosition?e.extend(n.getPosition()):n.getBounds?(e.extend(n.getBounds().getNorthEast()),e.extend(n.getBounds().getSouthWest())):n.getPaths?n.getPaths().forEach(function(t){t.forEach(function(t){e.extend(t)})}):n.getPath?n.getPath().forEach(function(t){e.extend(t)}):n.getCenter?e.extend(n.getCenter()):n instanceof M&&((n=T.getById(n.id(),!0))&&n.autofit(e))}),e.isEmpty()||_.getBounds()&&_.getBounds().equals(e)||("maxZoom"in n.td&&B.event.addListenerOnce(_,"bounds_changed",function(){this.getZoom()>n.td.maxZoom&&this.setZoom(n.td.maxZoom)}),_.fitBounds(e)),m(n,!0)},j.clear=function(n){if(o(n.td)){if(T.clearById(n.td)||T.objClearById(n.td))return void m(n,!0);n.td={name:n.td}}n.td.id?t.each(f(n.td.id),function(t,n){T.clearById(n)||T.objClearById(n)}):(T.clear(f(n.td.name),n.td.last,n.td.first,n.td.tag),T.objClear(f(n.td.name),n.td.last,n.td.first,n.td.tag)),m(n,!0)},j.get=function(e,i,a){var s,r,u=i?e:e.td;return i||(a=u.full),o(u)?!1===(r=T.getById(u,!1,a)||T.objGetById(u))&&(s=u,u={}):s=u.name,"map"===s&&(r=_),r||(r=[],u.id?(t.each(f(u.id),function(t,n){r.push(T.getById(n,!1,a)||T.objGetById(n))}),C(u.id)||(r=r[0])):(t.each(s?f(s):[n],function(n,e){var o;u.first?(o=T.get(e,!1,u.tag,a))&&r.push(o):u.all?t.each(T.all(e,u.tag,a),function(t,n){r.push(n)}):(o=T.get(e,!0,u.tag,a))&&r.push(o)}),u.all||C(s)||(r=r[0]))),r=C(r)||!u.all?r:[r],i?r:void m(e,r)},j.exec=function(n){t.each(f(n.td.func),function(e,o){t.each(j.get(n.td,!0,!n.td.hasOwnProperty("full")||n.td.full),function(t,n){o.call(i,n)})}),m(n,!0)},j.trigger=function(n){if(o(n.td))B.event.trigger(_,n.td);else{var e=[_,n.td.eventName];n.td.var_args&&t.each(n.td.var_args,function(t,n){e.push(n)}),B.event.trigger.apply(B.event,e)}p(n),P.ack()}}var k,B,j=0,O=t.isFunction,C=t.isArray,E={},S=new function(){var t=[];this.get=function(n){if(t.length){var o,i,a,s,r,l=u(n);for(o=0;o<t.length;o++){for(s=t[o],r=l.length===s.keys.length,i=0;i<l.length&&r;i++)a=l[i],r=a in s.request,r&&(r=e(n[a])&&"equals"in n[a]&&O(n[a])?n[a].equals(s.request[a]):n[a]===s.request[a]);if(r)return s.results}}},this.store=function(n,e){t.push({request:n,keys:u(n),results:e})}};t.fn.gmap4=function(){var n,o=[],i=[];for(function(){var n;B=google.maps,k||(k={verbose:!1,queryLimit:{attempt:5,delay:250,random:250},classes:(n={},t.each("Map Marker InfoWindow Circle Rectangle OverlayView StreetViewPanorama KmlLayer TrafficLayer BicyclingLayer GroundOverlay StyledMapType ImageMapType".split(" "),function(t,e){n[e]=B[e]}),n),map:{mapTypeId:B.MapTypeId.ROADMAP,center:[46.578498,2.457275],zoom:2},overlay:{pane:"floatPane",content:"",offset:{x:0,y:0}},geoloc:{getCurrentPosition:{maximumAge:6e4,timeout:5e3}}})}(),n=0;n<arguments.length;n++)arguments[n]&&o.push(arguments[n]);return o.length||o.push("map"),t.each(this,function(){var n=t(this),a=n.data("gmap4");!1,a||(a=new P(n),n.data("gmap4",a)),1!==o.length||"get"!==o[0]&&!function(t){var n,o=!1;if(e(t)&&t.hasOwnProperty("get")){for(n in t)if("get"!==n)return!1;o=!t.get.hasOwnProperty("callback")}return o}(o[0])?a._plan(o):i.push("get"===o[0]?a.get("map",!0):a.get(o[0].get,!0,o[0].get.full))}),i.length?1===i.length?i[0]:i:this}}(jQuery);